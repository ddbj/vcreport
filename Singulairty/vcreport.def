BootStrap: docker
From: rubylang/ruby:2.7.0-bionic

%post
    apt -y update
    apt -y upgrade
    apt -y install python python3-pip git build-essential zlib1g zlib1g-dev r-base gdebi-core wget

    pip3 install --upgrade pip
    pip3 install cwlref-runner
    R -e "install.packages('rmarkdown')"
    R -e "install.packages('shiny', repos='https://cran.rstudio.com/')"
    wget https://download3.rstudio.org/ubuntu-14.04/x86_64/shiny-server-1.5.14.948-amd64.deb
    yes | gdebi shiny-server-1.5.14.948-amd64.deb
    git clone https://github.com/tafujino/vcreport.git
    cd vcreport
    gem install bundler
    bundle install
    rake build
    gem install --local pkg/*.gem

%runscript
    vcreport "$@"

%labels
    Author fujino@edu.k.u-tokyo.ac.jp
